{"meta": {"type": "db", "canSave": true, "canEdit": true, "canAdmin": true, "canStar": true, "slug": "slaves-health", "url": "/d/jiEWBkRnk/slaves-health", "expires": "0001-01-01T00:00:00Z", "created": "2021-06-12T01:02:18Z", "updated": "2021-06-22T12:13:32Z", "updatedBy": "admin", "createdBy": "admin", "version": 24, "hasAcl": false, "isFolder": false, "folderId": 0, "folderUid": "", "folderTitle": "General", "folderUrl": "", "provisioned": false, "provisionedExternalId": ""}, "dashboard": {"annotations": {"list": [{"builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard"}]}, "editable": true, "gnetId": null, "graphTooltip": 0, "id": 62, "iteration": 1624363744360, "links": [], "panels": [{"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0}, "id": 6, "panels": [], "repeat": "slave", "title": "$slave", "type": "row"}, {"datasource": "Prometheus", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"fillOpacity": 70, "lineWidth": 0}, "mappings": [{"options": {"0": {"index": 0, "text": "Failed"}, "1": {"index": 1, "text": "OK"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}, "overrides": []}, "gridPos": {"h": 7, "w": 4, "x": 0, "y": 1}, "id": 1030, "options": {"alignValue": "center", "legend": {"displayMode": "hidden", "placement": "bottom"}, "mergeValues": true, "rowHeight": 0.9, "showValue": "always", "tooltip": {"mode": "single"}}, "targets": [{"exemplar": true, "expr": "sum(slaves_vm_health_ssh_status{ipaddr=~\"$slave\"}) without (ssh_error)", "instant": false, "interval": "", "legendFormat": " ", "refId": "A"}], "title": "SSH Status", "type": "state-timeline"}, {"datasource": "Prometheus", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineStyle": {"fill": "solid"}, "lineWidth": 2, "pointSize": 12, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "area"}}, "mappings": [], "max": 100, "min": 0, "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null}, {"color": "#EAB839", "value": 70}, {"color": "red", "value": 80}]}, "unit": "none"}, "overrides": [{"matcher": {"id": "byName", "options": "memory_usage"}, "properties": [{"id": "unit", "value": "percent"}, {"id": "min", "value": 0}, {"id": "max", "value": 100}]}, {"matcher": {"id": "byName", "options": "disk_usage"}, "properties": [{"id": "unit", "value": "percent"}, {"id": "min", "value": 0}, {"id": "max", "value": 100}]}]}, "gridPos": {"h": 7, "w": 4, "x": 4, "y": 1}, "id": 4, "interval": "1m", "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "multi"}}, "targets": [{"exemplar": true, "expr": "slaves_vm_health_memory_usage{slave_ip=~\"$slave\"}", "interval": "", "legendFormat": "memory_usage", "refId": "A"}, {"exemplar": true, "expr": "slaves_vm_health_disk_usage{slave_ip=~\"$slave\"}", "hide": false, "interval": "", "legendFormat": "disk_usage", "refId": "B"}], "title": "Memory and Disk Usage ($slave)", "type": "timeseries"}, {"datasource": "Prometheus", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 22, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineStyle": {"fill": "solid"}, "lineWidth": 2, "pointSize": 12, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "min": 0, "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null}]}, "unit": "percentunit"}, "overrides": []}, "gridPos": {"h": 7, "w": 4, "x": 8, "y": 1}, "id": 230, "interval": "1m", "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "multi"}}, "targets": [{"exemplar": true, "expr": "slaves_vm_health_cpu_load_avg_1min{slave_ip=~\"$slave\"}", "interval": "", "legendFormat": "cpu_load_avg_1min", "refId": "A"}, {"exemplar": true, "expr": "slaves_vm_health_cpu_load_avg_5mins{slave_ip=~\"$slave\"}", "hide": false, "interval": "", "legendFormat": "cpu_load_avg_5mins", "refId": "B"}, {"exemplar": true, "expr": "slaves_vm_health_cpu_load_avg_15mins{slave_ip=~\"$slave\"}", "hide": false, "interval": "", "legendFormat": "cpu_load_avg_15mins", "refId": "C"}], "title": "CPU Load ($slave)", "type": "timeseries"}, {"datasource": "Prometheus", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 22, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineStyle": {"fill": "solid"}, "lineWidth": 2, "pointSize": 12, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null}]}, "unit": "none"}, "overrides": []}, "gridPos": {"h": 7, "w": 4, "x": 12, "y": 1}, "id": 364, "interval": "1m", "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "multi"}}, "targets": [{"exemplar": true, "expr": "slaves_vm_health_total_processes{slave_ip=~\"$slave\"}", "hide": false, "interval": "", "legendFormat": "total_processes", "refId": "B"}], "title": "Processes ($slave)", "type": "timeseries"}, {"datasource": "Prometheus", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 22, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineStyle": {"fill": "solid"}, "lineWidth": 2, "pointSize": 12, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null}]}, "unit": "deckbytes"}, "overrides": []}, "gridPos": {"h": 7, "w": 4, "x": 16, "y": 1}, "id": 542, "interval": "1m", "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "multi"}}, "targets": [{"exemplar": true, "expr": "slaves_vm_health_memory_total{slave_ip=~\"$slave\"}", "hide": false, "interval": "", "legendFormat": "memory_total", "refId": "B"}, {"exemplar": true, "expr": "slaves_vm_health_memory_free{slave_ip=~\"$slave\"}", "hide": false, "interval": "", "legendFormat": "memory_free", "refId": "C"}, {"exemplar": true, "expr": "slaves_vm_health_memory_available{slave_ip=~\"$slave\"}", "hide": false, "interval": "", "legendFormat": "memory_available", "refId": "A"}], "title": "Memory ($slave)", "type": "timeseries"}, {"datasource": "Prometheus", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 22, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineStyle": {"fill": "solid"}, "lineWidth": 2, "pointSize": 12, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "normal"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null}]}, "unit": "decmbytes"}, "overrides": []}, "gridPos": {"h": 7, "w": 4, "x": 20, "y": 1}, "id": 764, "interval": "1m", "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "multi"}}, "targets": [{"exemplar": true, "expr": "slaves_vm_health_disk_used{slave_ip=~\"$slave\"}", "hide": false, "interval": "", "legendFormat": "disk_used", "refId": "B"}, {"exemplar": true, "expr": "slaves_vm_health_disk_avail{slave_ip=~\"$slave\"}", "hide": false, "interval": "", "legendFormat": "disk_available", "refId": "C"}], "title": "Disk ($slave)", "type": "timeseries"}, {"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 24}, "id": 140, "panels": [], "title": "All Slaves", "type": "row"}, {"datasource": "CSV", "fieldConfig": {"defaults": {"custom": {"align": null, "displayMode": "auto", "filterable": false}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "ssh_status"}, "properties": [{"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}, {"id": "custom.displayMode", "value": "auto"}, {"id": "mappings", "value": [{"options": {"0": {"index": 1, "text": "\u274c"}, "1": {"index": 0, "text": "\u2705"}}, "type": "value"}]}]}, {"matcher": {"id": "byName", "options": "memory_available(kB)"}, "properties": [{"id": "custom.displayMode", "value": "color-background"}, {"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "orange", "value": 500000}, {"color": "green", "value": 1000000}]}}, {"id": "noValue", "value": "0"}, {"id": "unit", "value": "deckbytes"}]}, {"matcher": {"id": "byName", "options": "cpu_load_avg_5mins"}, "properties": [{"id": "custom.displayMode", "value": "color-background"}, {"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 70}]}}]}, {"matcher": {"id": "byRegexp", "options": "/(MB)/"}, "properties": [{"id": "unit", "value": "decmbytes"}]}, {"matcher": {"id": "byRegexp", "options": "/%/"}, "properties": [{"id": "custom.displayMode", "value": "basic"}, {"id": "unit", "value": "percent"}, {"id": "thresholds", "value": {"mode": "percentage", "steps": [{"color": "green", "value": null}, {"color": "#EAB839", "value": 70}, {"color": "red", "value": 80}]}}, {"id": "max", "value": 100}, {"id": "min", "value": 0}]}, {"matcher": {"id": "byRegexp", "options": "/(kB)/"}, "properties": [{"id": "unit", "value": "deckbytes"}]}, {"matcher": {"id": "byRegexp", "options": "/cpu_load/"}, "properties": [{"id": "unit", "value": "percentunit"}]}]}, "gridPos": {"h": 20, "w": 24, "x": 0, "y": 25}, "id": 2, "interval": "", "options": {"showHeader": true, "sortBy": [{"desc": false, "displayName": "proc_fd_ulimit"}]}, "pluginVersion": "8.0.1", "targets": [{"decimalSeparator": ".", "delimiter": ",", "header": true, "ignoreUnknown": false, "path": "/view/ProductivityAutomation/job/vm_health_for_dashboard/lastSuccessfulBuild/artifact/vm_health_info.csv", "refId": "A", "schema": [{"name": "ipaddr", "type": "string"}, {"name": "ssh_status", "type": "string"}, {"name": "memory_available(kB)", "type": "number"}, {"name": "disk_use%", "type": "number"}, {"name": "cpu_load_avg_5mins", "type": "number"}, {"name": "system_time", "type": "time"}, {"name": "memory_total(kB)", "type": "string"}, {"name": "memory_use(%)", "type": "number"}], "skipRows": 0}], "timeFrom": null, "timeShift": null, "title": "VM Health (All)", "transformations": [{"id": "organize", "options": {"excludeByName": {"memory_total(kB)": false}, "indexByName": {"cpu_load_avg_5mins": 4, "disk_use%": 3, "ipaddr": 0, "memory_available(kB)": 2, "ssh_status": 1, "system_time": 5}, "renameByName": {}}}], "type": "table"}], "refresh": "", "schemaVersion": 30, "style": "dark", "tags": [], "templating": {"list": [{"allValue": null, "current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "datasource": "Prometheus", "definition": "label_values(slave_ip)", "description": null, "error": null, "hide": 0, "includeAll": true, "label": null, "multi": true, "name": "slave", "options": [], "query": {"query": "label_values(slave_ip)", "refId": "StandardVariableQuery"}, "refresh": 1, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}]}, "time": {"from": "now-6h", "to": "now"}, "timepicker": {}, "timezone": "", "title": "Slaves Health", "uid": "jiEWBkRnk", "version": 24}}